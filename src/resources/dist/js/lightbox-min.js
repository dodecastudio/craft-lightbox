"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var focusableElements=function(t){return t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')},focusFirstDescendant=function t(e,n){for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(attemptFocus(o)||t(o))return!0}return!(!n||!attemptFocus(n))},attemptFocus=function(t){if(!isFocusable(t))return!1;try{t.focus()}catch(t){return!1}return document.activeElement===t},isFocusable=function(t){if(t.tabIndex<0)return!1;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!=t.rel;case"INPUT":return"hidden"!=t.type;case"BUTTON":case"SELECT":case"TEXTAREA":case"AREA":return!0;default:return!1}},addMultiple=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(e=t.classList).add.apply(e,_toConsumableArray(r))},removeMultiple=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(e=t.classList).remove.apply(e,_toConsumableArray(r))},initLightbox=function(t){var e=t.cssClasses,n=t.identifier,r=t.launchLightboxCssClass,o=t.responsive,a=t.translations,i=document.querySelector("body"),c=document.getElementById("".concat(n,"-modal")),s=document.getElementById("".concat(n,"-container")),l=document.getElementById("".concat(n,"-frame")),u=document.getElementById("".concat(n,"-control-previous")),d=document.getElementById("".concat(n,"-control-next")),y=document.getElementById("".concat(n,"-control-close")),m=document.getElementById("".concat(n,"-info-caption")),f=document.getElementById("".concat(n,"-info-total")),p=document.querySelectorAll(".".concat(r)),h={},g={timing:250,currentGallery:"default",current:-1,open:!1,touch:{startPos:0,lastPos:0,direction:0,moveThreshold:50},lastKeyboardControl:!1,isTouchDevice:"ontouchstart"in window,supportedResponsiveMimeTypes:["image/jpeg","image/png","image/tiff","image/webp"]},v=function(){window.initialFocus&&window.initialFocus.focus(),c.style.display="none",c.setAttribute("aria-label",a.LABEL),c.setAttribute("aria-hidden",!0),i.classList.remove(e.disableScroll),removeMultiple(i,e.disableScrollClasses),g.current=-1,g.open=!1,f.style.display="none",f.innerText="",m.style.display="none",l.innerHTML="",l.classList.remove("".concat(e.lightboxContent,"--loading")),g.lastKeyboardControl=!1},b=function(){g.touch.direction=-1,w(g.current-(E()?1:0))},L=function(){g.touch.direction=1,w(g.current+(A()?1:0))},E=function(){return g.current>0},A=function(){return g.current<h[g.currentGallery].images.length-1},T=function(){u.style.setProperty("display","none"),d.style.setProperty("display","none")},I=function(){u.style.removeProperty("display"),d.style.removeProperty("display")},w=function(t){var n=h[g.currentGallery].images.length;t>=0&&t<=n-1&&n>0&&(g.open||function(){var t=h[g.currentGallery].images.length,n=h[g.currentGallery].title,r=1==t?a.UNTITLED_DYNAMIC_LABEL_s:a.UNTITLED_DYNAMIC_LABEL_p;"untitled"!==n&&(r=1==t?a.DYNAMIC_LABEL_s:a.DYNAMIC_LABEL_p),r=(r=r.replace("{total}",t)).replace("{title}",n),c.setAttribute("aria-label",r),c.style.display="flex",c.setAttribute("aria-hidden",!1),i.classList.add(e.disableScroll),addMultiple(i,e.disableScrollClasses),g.open=!0,s.focus(),focusFirstDescendant(s,y)}(),g.current!==t&&(g.current=t,E()||A()?(I(),E()?(u.classList.remove("visibility-hidden"),u.disabled=!1):(u.classList.add("visibility-hidden"),u.disabled=!0),A()?(d.classList.remove("visibility-hidden"),d.disabled=!1):(d.classList.add("visibility-hidden"),d.disabled=!0)):T(),"right"===g.lastKeyboardControl&&(d.disabled?c.focus():d.focus()),"left"===g.lastKeyboardControl&&(u.disabled?c.focus():u.focus()),P(),window.setTimeout((function(){C();var n=function(t){var n=h[g.currentGallery].images[t],r=n.mimetype,i=n.srcsetImages,c=n.title,s=n.url;if(g.supportedResponsiveMimeTypes.includes(r)&&o)return'\n        <picture class="'.concat(e.lightboxPicture,'">\n          <source\n            type="').concat(r,'"\n            srcset="').concat(i.map((function(t,e){return"".concat(t,",")})),"\n            ").concat(s,'" />\n          <img\n            alt=""\n            class="').concat(e.lightboxImage,'"\n            loading="lazy"\n            src="').concat(i[0],'" />\n        </picture>\n      ');if(r.indexOf("image")<0){var l=r.substring(r.lastIndexOf("/")+1);return'<p style="text-align: center;">'.concat(a.UNSUPPORTED_FILETYPE.replace("{ext}",l),'<br/><a href="').concat(s,'" target="_blank">').concat(c,"</a><br/>").concat(s.substring(s.lastIndexOf("/")+1),"</p>")}return'\n      <img\n        alt=""\n        class="'.concat(e.lightboxImage,'"\n        loading="lazy"\n        src="').concat(s,'" />\n    ')}(t),r=h[g.currentGallery].images[t].averageColor;if(l.innerHTML=n,r){var i=r.replace(/[^\d,]/g,"").split(",");c.style.backgroundColor="hsla(".concat(i[0],",").concat(i[1],"%,").concat(.5*i[2],"%,0.95)")}var s=l.querySelector("img");s&&(l.classList.add(e.lightboxImageLoading),s.onload=function(){l.classList.remove(e.lightboxImageLoading)}),function(t){var n=h[g.currentGallery].images.length,r=h[g.currentGallery].images[g.current].title,o=g.current+1;c.dataset.showcounter&&(f.style.removeProperty("display"),f.innerHTML='<span class="'.concat(e.screenReaderOnly," ").concat(e.screenReaderOnlyClasses,'">Image ').concat(o," of ").concat(n,'.</span><span aria-hidden="true">').concat(o,"/").concat(n,"</span>")),c.dataset.showcaptions?(m.style.removeProperty("display"),m.innerHTML=r):t.setAttribute("alt",r)}(s)}),g.timing)))},C=function(){_(0),x()},_=function(t){l.setAttribute("style","transform: translate3d(".concat(t,"px, 0, 0)"))},P=function(){var t=g.touch.direction>0?"-200%":g.touch.direction<0?"200%":0;l.setAttribute("style","transition-property: transform; transition-duration: ".concat(g.timing,"ms; transform: translate3d(").concat(t,", 0, 0)"))},x=function(){l.style.removeProperty("transition")};p.length>0&&(p.forEach((function(t){var e=t.dataset.gallery?t.dataset.gallery:"default";if(void 0===h[e]){var n=document.getElementById(e),r=n&&n.dataset.title?n.dataset.title:"untitled";h[e]={ref:e,title:r,images:[]}}var o=t.dataset,a=o.averagecolor,i=void 0===a?null:a,c=o.mimetype,s=o.orientation,l=o.ref,u=void 0===l?null:l,d=o.srcset,y=o.title,m=o.url;h[e].images.push({url:m,title:y,orientation:s,srcsetImages:d.split(","),mimetype:c,ref:u,gallery:e,averagecolor:i});var f=h[e].images.length-1;t.addEventListener("click",(function(t){t.preventDefault(),g.currentGallery=e,w(f),window.initialFocus=t.currentTarget}))})),window.addEventListener("keydown",(function(t){if(g.open){var e=focusableElements(c),n=e[0],r=e[1],o=e[e.length-1],a=e[e.length-2];"Tab"===t.key&&(1===e.length&&t.preventDefault(),t.shiftKey?(document.activeElement===n||n.disabled&&document.activeElement===r||n.disabled&&document.activeElement===c)&&(t.preventDefault(),o.disabled?a.focus():o.focus()):((document.activeElement===o||o.disabled&&document.activeElement===a||o.disabled&&document.activeElement===c)&&(t.preventDefault(),n.disabled?r.focus():n.focus()),n.disabled&&o.disabled&&(t.preventDefault(),y.focus()))),32!==t.keyCode&&"Enter"!==t.key||(document.activeElement===u&&(g.lastKeyboardControl="ArrowLeft"),document.activeElement===d&&(g.lastKeyboardControl="ArrowRight")),"Escape"===t.key&&v(),"ArrowLeft"===t.key&&(g.lastKeyboardControl="ArrowLeft",b()),"ArrowRight"===t.key&&(g.lastKeyboardControl="ArrowRight",L())}})),c.addEventListener("click",(function(t){t.target.id==="".concat(n,"-modal")&&(t.preventDefault(),v())})),u.addEventListener("click",(function(t){t.preventDefault(),b()})),d.addEventListener("click",(function(t){t.preventDefault(),L()})),y.addEventListener("click",(function(t){t.preventDefault(),v()})),l.addEventListener("touchmove",(function(t){g.touch.lastPos>g.touch.startPos?g.touch.direction=-1:g.touch.direction=1,g.touch.direction<0&&!A()&&_(t.touches[0].clientX-g.touch.startPos),g.touch.direction>0&&!E()&&_(t.touches[0].clientX-g.touch.startPos),E()&&A()&&_(t.touches[0].clientX-g.touch.startPos),g.touch.lastPos=t.touches[0].clientX}),{passive:!0}),l.addEventListener("touchstart",(function(t){g.touch.startPos=t.touches[0].clientX,g.touch.direction=0,x()}),{passive:!0}),l.addEventListener("touchend",(function(){g.touch.lastPos-g.touch.startPos>g.touch.moveThreshold&&(E()?b():_(0)),g.touch.lastPos-g.touch.startPos<-g.touch.moveThreshold&&(A()?L():_(0))}),{passive:!0}))};window.initLightbox=initLightbox;