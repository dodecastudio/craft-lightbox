"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var focusableElements=function(t){return t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')},focusFirstDescendant=function t(e,n){for(var r=0;r<e.childNodes.length;r++){var a=e.childNodes[r];if(attemptFocus(a)||t(a))return!0}return!(!n||!attemptFocus(n))},attemptFocus=function(t){if(!isFocusable(t))return!1;try{t.focus()}catch(t){return!1}return document.activeElement===t},isFocusable=function(t){if(t.tabIndex<0)return!1;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!=t.rel;case"INPUT":return"hidden"!=t.type;case"BUTTON":case"SELECT":case"TEXTAREA":case"AREA":return!0;default:return!1}},addMultiple=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(e=t.classList).add.apply(e,_toConsumableArray(r))},removeMultiple=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(e=t.classList).remove.apply(e,_toConsumableArray(r))},initLightbox=function(t){var e=t.cssClasses,n=t.identifier,r=t.launchLightboxCssClass,a=t.translations,o=document.querySelector("body"),i=document.getElementById("".concat(n,"-modal")),s=document.getElementById("".concat(n,"-container")),c=document.getElementById("".concat(n,"-frame")),l=document.getElementById("".concat(n,"-control-previous")),u=document.getElementById("".concat(n,"-control-next")),d=document.getElementById("".concat(n,"-control-close")),y=document.getElementById("".concat(n,"-info-caption")),m=document.getElementById("".concat(n,"-info-total")),f=document.querySelectorAll(".".concat(r)),p={},g={timing:250,currentGallery:"default",current:-1,open:!1,touch:{startPos:0,lastPos:0,direction:0,moveThreshold:50},lastKeyboardControl:!1,isTouchDevice:"ontouchstart"in window,supportedResponsiveMimeTypes:["image/jpeg","image/png","image/tiff","image/webp"]},h=function(){window.initialFocus&&window.initialFocus.focus(),i.style.display="none",i.setAttribute("aria-label",a.LABEL),i.setAttribute("aria-hidden",!0),o.classList.remove(e.disableScroll),removeMultiple(o,e.disableScrollClasses),g.current=-1,g.open=!1,m.style.display="none",m.innerText="",y.style.display="none",c.innerHTML="",c.classList.remove("".concat(e.lightboxContent,"--loading")),g.lastKeyboardControl=!1},b=function(){g.touch.direction=-1,T(g.current-(L()?1:0))},v=function(){g.touch.direction=1,T(g.current+(E()?1:0))},L=function(){return g.current>0},E=function(){return g.current<p[g.currentGallery].images.length-1},A=function(){l.style.setProperty("display","none"),u.style.setProperty("display","none")},I=function(){l.style.removeProperty("display"),u.style.removeProperty("display")},T=function(t){var n=p[g.currentGallery].images.length;t>=0&&t<=n-1&&n>0&&(g.open||function(){var t=p[g.currentGallery].images.length,n=p[g.currentGallery].title,r=1==t?a.UNTITLED_DYNAMIC_LABEL_s:a.UNTITLED_DYNAMIC_LABEL_p;"untitled"!==n&&(r=1==t?a.DYNAMIC_LABEL_s:a.DYNAMIC_LABEL_p),r=(r=r.replace("{total}",t)).replace("{title}",n),i.setAttribute("aria-label",r),i.style.display="flex",i.setAttribute("aria-hidden",!1),o.classList.add(e.disableScroll),addMultiple(o,e.disableScrollClasses),g.open=!0,s.focus(),focusFirstDescendant(s,d)}(),g.current!==t&&(g.current=t,L()||E()?(I(),L()?(l.classList.remove("visibility-hidden"),l.disabled=!1):(l.classList.add("visibility-hidden"),l.disabled=!0),E()?(u.classList.remove("visibility-hidden"),u.disabled=!1):(u.classList.add("visibility-hidden"),u.disabled=!0)):A(),"right"===g.lastKeyboardControl&&(u.disabled?i.focus():u.focus()),"left"===g.lastKeyboardControl&&(l.disabled?i.focus():l.focus()),_(),window.setTimeout((function(){w();var n=function(t){var n=p[g.currentGallery].images[t],r=n.mimetype,o=n.srcsetImages,i=n.srcsetImagesWebp,s=n.title,c=n.url,l=g.supportedResponsiveMimeTypes.includes(r),u=o.length>0;if(l&&u){var d=o[0].indexOf(" ")>0?o[0].substring(0,o[0].indexOf(" ")):o[0],y=o.length>0?'<source type="'.concat(r,'" srcset="').concat(o,'" />'):"",m=i.length>0?'<source type="image/webp" srcset="'.concat(i,'" />'):"";return'\n        <picture class="'.concat(e.lightboxPicture,'">\n          ').concat(y,"\n          ").concat(m,'\n          <img\n            alt=""\n            class="').concat(e.lightboxImage,'"\n            loading="lazy"\n            src="').concat(d,'" />\n        </picture>\n      ')}if(r.indexOf("image")<0){var f=r.substring(r.lastIndexOf("/")+1);return'<p style="text-align: center;">'.concat(a.UNSUPPORTED_FILETYPE.replace("{ext}",f),'<br/><a href="').concat(c,'" target="_blank">').concat(s,"</a><br/>").concat(c.substring(c.lastIndexOf("/")+1),"</p>")}return'\n      <img\n        alt=""\n        class="'.concat(e.lightboxImage,'"\n        loading="lazy"\n        src="').concat(c,'" />\n    ')}(t),r=p[g.currentGallery].images[t].averageColor;if(c.innerHTML=n,r){var o=r.replace(/[^\d,]/g,"").split(",");i.style.backgroundColor="hsla(".concat(o[0],",").concat(o[1],"%,").concat(.5*o[2],"%,0.95)")}var s=c.querySelector("img");s&&(c.classList.add(e.lightboxImageLoading),s.onload=function(){c.classList.remove(e.lightboxImageLoading)}),function(t){var n=p[g.currentGallery].images.length,r=p[g.currentGallery].images[g.current].title,a=g.current+1;i.dataset.showcounter&&(m.style.removeProperty("display"),m.innerHTML='<span class="'.concat(e.screenReaderOnly," ").concat(e.screenReaderOnlyClasses,'">Image ').concat(a," of ").concat(n,'.</span><span aria-hidden="true">').concat(a,"/").concat(n,"</span>")),i.dataset.showcaptions?(y.style.removeProperty("display"),y.innerHTML=r):t.setAttribute("alt",r)}(s)}),g.timing)))},w=function(){C(0),x()},C=function(t){c.style.transform="translate3d(".concat(t,", 0, 0)")},_=function(){var t=g.touch.direction>0?"-200%":g.touch.direction<0?"200%":0;c.style.transform="translate3d(".concat(t,", 0, 0)"),c.style.transitionDuration="".concat(g.timing,"ms"),c.style.transitionProperty="transform"},x=function(){c.style.transitionDuration="0ms",c.style.transform="transform: translate3d(0, 0, 0)"};f.length>0&&(f.forEach((function(t){var e=t.dataset.gallery?t.dataset.gallery:"default";if(void 0===p[e]){var n=document.getElementById(e),r=n&&n.dataset.title?n.dataset.title:"untitled";p[e]={ref:e,title:r,images:[]}}var a=t.dataset,o=a.averagecolor,i=void 0===o?null:o,s=a.mimetype,c=a.orientation,l=a.ref,u=void 0===l?null:l,d=a.srcset,y=void 0===d?"":d,m=a.srcsetwebp,f=void 0===m?"":m,h=a.title,b=a.url;p[e].images.push({url:b,title:h,orientation:c,srcsetImages:y.indexOf(",")>0?y.split(","):[],srcsetImagesWebp:f.indexOf(",")>0?f.split(","):[],mimetype:s,ref:u,gallery:e,averageColor:i});var v=p[e].images.length-1;t.addEventListener("click",(function(t){t.preventDefault(),g.currentGallery=e,T(v),window.initialFocus=t.currentTarget}))})),window.addEventListener("keydown",(function(t){if(g.open){var e=focusableElements(i),n=e[0],r=e[1],a=e[e.length-1],o=e[e.length-2];"Tab"===t.key&&(1===e.length&&t.preventDefault(),t.shiftKey?(document.activeElement===n||n.disabled&&document.activeElement===r||n.disabled&&document.activeElement===i)&&(t.preventDefault(),a.disabled?o.focus():a.focus()):((document.activeElement===a||a.disabled&&document.activeElement===o||a.disabled&&document.activeElement===i)&&(t.preventDefault(),n.disabled?r.focus():n.focus()),n.disabled&&a.disabled&&(t.preventDefault(),d.focus()))),32!==t.keyCode&&"Enter"!==t.key||(document.activeElement===l&&(g.lastKeyboardControl="ArrowLeft"),document.activeElement===u&&(g.lastKeyboardControl="ArrowRight")),"Escape"===t.key&&h(),"ArrowLeft"===t.key&&(g.lastKeyboardControl="ArrowLeft",b()),"ArrowRight"===t.key&&(g.lastKeyboardControl="ArrowRight",v())}})),i.addEventListener("click",(function(t){t.target.id!=="".concat(n,"-modal")&&t.target.id!=="".concat(n,"-frame")||(t.preventDefault(),h())})),l.addEventListener("click",(function(t){t.preventDefault(),b()})),u.addEventListener("click",(function(t){t.preventDefault(),v()})),d.addEventListener("click",(function(t){t.preventDefault(),h()})),c.addEventListener("touchmove",(function(t){g.touch.lastPos>g.touch.startPos?g.touch.direction=-1:g.touch.direction=1,g.touch.direction<0&&!E()&&C(t.touches[0].clientX-g.touch.startPos),g.touch.direction>0&&!L()&&C(t.touches[0].clientX-g.touch.startPos),L()&&E()&&C(t.touches[0].clientX-g.touch.startPos),g.touch.lastPos=t.touches[0].clientX}),{passive:!0}),c.addEventListener("touchstart",(function(t){g.touch.startPos=t.touches[0].clientX,g.touch.direction=0,x()}),{passive:!0}),c.addEventListener("touchend",(function(){g.touch.lastPos-g.touch.startPos>g.touch.moveThreshold&&(L()?b():C(0)),g.touch.lastPos-g.touch.startPos<-g.touch.moveThreshold&&(E()?v():C(0))}),{passive:!0}))};window.initLightbox=initLightbox;