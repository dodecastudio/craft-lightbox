"use strict";function _toConsumableArray(t){return _arrayWithoutHoles(t)||_iterableToArray(t)||_unsupportedIterableToArray(t)||_nonIterableSpread()}function _arrayWithoutHoles(t){if(Array.isArray(t))return _arrayLikeToArray(t)}function _iterableToArray(t){if("undefined"!=typeof Symbol&&null!=t[Symbol.iterator]||null!=t["@@iterator"])return Array.from(t)}function _unsupportedIterableToArray(t,e){if(t){if("string"==typeof t)return _arrayLikeToArray(t,e);var n=Object.prototype.toString.call(t).slice(8,-1);return"Object"===n&&t.constructor&&(n=t.constructor.name),"Map"===n||"Set"===n?Array.from(t):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(t,e):void 0}}function _arrayLikeToArray(t,e){(null==e||e>t.length)&&(e=t.length);for(var n=0,r=new Array(e);n<e;n++)r[n]=t[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var focusableElements=function(t){return t.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')},focusFirstDescendant=function t(e,n){for(var r=0;r<e.childNodes.length;r++){var o=e.childNodes[r];if(attemptFocus(o)||t(o))return!0}return!(!n||!attemptFocus(n))},attemptFocus=function(t){if(!isFocusable(t))return!1;try{t.focus()}catch(t){return!1}return document.activeElement===t},isFocusable=function(t){if(t.tabIndex<0)return!1;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!=t.rel;case"INPUT":return"hidden"!=t.type;case"BUTTON":case"SELECT":case"TEXTAREA":case"AREA":return!0;default:return!1}},addMultiple=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(e=t.classList).add.apply(e,_toConsumableArray(r))},removeMultiple=function(t){var e,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(e=t.classList).remove.apply(e,_toConsumableArray(r))},initLightbox=function(t){var e=t.cssClasses,n=t.identifier,r=t.launchLightboxCssClass,o=t.responsive,a=t.srcsetSizes,i=t.translations,c=document.querySelector("body"),s=document.getElementById("".concat(n,"-modal")),l=document.getElementById("".concat(n,"-container")),u=document.getElementById("".concat(n,"-frame")),d=document.getElementById("".concat(n,"-control-previous")),y=document.getElementById("".concat(n,"-control-next")),m=document.getElementById("".concat(n,"-control-close")),f=document.getElementById("".concat(n,"-info-caption")),p=document.getElementById("".concat(n,"-info-total")),h=document.querySelectorAll(".".concat(r)),g={},v={timing:500,currentGallery:"default",current:-1,open:!1,touch:{startPos:0,lastPos:0,direction:0,moveThreshold:50},lastKeyboardControl:!1,isTouchDevice:"ontouchstart"in window,supportedResponsiveMimeTypes:["image/jpeg","image/png","image/tiff","image/webp"]},b=function(){window.initialFocus&&window.initialFocus.focus(),s.style.display="none",s.setAttribute("aria-label",i.LABEL),s.setAttribute("aria-hidden",!0),c.classList.remove(e.disableScroll),removeMultiple(c,e.disableScrollClasses),v.current=-1,v.open=!1,p.style.display="none",p.innerText="",f.style.display="none",u.innerHTML="",u.classList.remove("".concat(e.lightboxContent,"--loading")),v.lastKeyboardControl=!1},L=function(){v.touch.direction=-1,C(v.current-(A()?1:0))},E=function(){v.touch.direction=1,C(v.current+(T()?1:0))},A=function(){return v.current>0},T=function(){return v.current<g[v.currentGallery].images.length-1},I=function(){d.style.setProperty("display","none"),y.style.setProperty("display","none")},w=function(){d.style.removeProperty("display"),y.style.removeProperty("display")},C=function(t){var n=g[v.currentGallery].images.length;t>=0&&t<=n-1&&n>0&&(v.open||function(){var t=g[v.currentGallery].images.length,n=g[v.currentGallery].title,r=1==t?i.UNTITLED_DYNAMIC_LABEL_s:i.UNTITLED_DYNAMIC_LABEL_p;"untitled"!==n&&(r=1==t?i.DYNAMIC_LABEL_s:i.DYNAMIC_LABEL_p),r=(r=r.replace("{total}",t)).replace("{title}",n),s.setAttribute("aria-label",r),s.style.display="flex",s.setAttribute("aria-hidden",!1),c.classList.add(e.disableScroll),addMultiple(c,e.disableScrollClasses),v.open=!0,l.focus(),focusFirstDescendant(l,m)}(),v.current!==t&&(v.current=t,A()||T()?(w(),A()?(d.classList.remove("visibility-hidden"),d.disabled=!1):(d.classList.add("visibility-hidden"),d.disabled=!0),T()?(y.classList.remove("visibility-hidden"),y.disabled=!1):(y.classList.add("visibility-hidden"),y.disabled=!0)):I(),"right"===v.lastKeyboardControl&&(y.disabled?s.focus():y.focus()),"left"===v.lastKeyboardControl&&(d.disabled?s.focus():d.focus()),x(),window.setTimeout((function(){_();var n=function(t){var n=g[v.currentGallery].images[t],r=n.mimetype,c=n.srcsetImages,s=n.title,l=n.url;if(v.supportedResponsiveMimeTypes.includes(r)&&o)return'\n        <picture class="'.concat(e.lightboxPicture,'">\n          <source\n            type="').concat(r,'"\n            srcset="').concat(a.map((function(t,e){return"".concat(c[e]," ").concat(t,"w,")})),"\n            ").concat(l,'" />\n          <img\n            alt=""\n            class="').concat(e.lightboxImage,'"\n            loading="lazy"\n            src="').concat(c[0],'" />\n        </picture>\n      ');if(r.indexOf("image")<0){var u=r.substring(r.lastIndexOf("/")+1);return'<p style="text-align: center;">'.concat(i.UNSUPPORTED_FILETYPE.replace("{ext}",u),'<br/><a href="').concat(l,'" target="_blank">').concat(s,"</a><br/>").concat(l.substring(l.lastIndexOf("/")+1),"</p>")}return'\n      <img\n        alt=""\n        class="'.concat(e.lightboxImage,'"\n        loading="lazy"\n        src="').concat(l,'" />\n    ')}(t),r=g[v.currentGallery].images[t].averageColor;if(u.innerHTML=n,r){var c=r.replace(/[^\d,]/g,"").split(",");s.style.backgroundColor="hsla(".concat(c[0],",").concat(c[1],"%,").concat(.5*c[2],"%,0.95)")}var l=u.querySelector("img");l&&(u.classList.add(e.lightboxImageLoading),l.onload=function(){u.classList.remove(e.lightboxImageLoading)}),function(t){var n=g[v.currentGallery].images.length,r=g[v.currentGallery].images[v.current].title,o=v.current+1;s.dataset.showcounter&&(p.style.removeProperty("display"),p.innerHTML='<span class="'.concat(e.screenReaderOnly," ").concat(e.screenReaderOnlyClasses,'">Image ').concat(o," of ").concat(n,'.</span><span aria-hidden="true">').concat(o,"/").concat(n,"</span>")),s.dataset.showcaptions?(f.style.removeProperty("display"),f.innerHTML=r):t.setAttribute("alt",r)}(l)}),v.timing)))},_=function(){P(0),D()},P=function(t){u.setAttribute("style","transform: translate3d(".concat(t,"px, 0, 0)"))},x=function(){var t=v.touch.direction>0?"-200%":v.touch.direction<0?"200%":0;u.setAttribute("style","transition-property: transform; transition-duration: ".concat(v.timing,"ms; transform: translate3d(").concat(t,", 0, 0)"))},D=function(){u.style.removeProperty("transition")};h.length>0&&(h.forEach((function(t){var e=t.dataset.gallery?t.dataset.gallery:"default";if(void 0===g[e]){var n=document.getElementById(e),r=n&&n.dataset.title?n.dataset.title:"untitled";g[e]={ref:e,title:r,images:[]}}var o=t.dataset,a=o.averagecolor,i=void 0===a?null:a,c=o.mimetype,s=o.orientation,l=o.ref,u=void 0===l?null:l,d=o.srcset,y=o.title,m=o.url;g[e].images.push({url:m,title:y,orientation:s,srcsetImages:d.split(","),mimetype:c,ref:u,gallery:e,averagecolor:i});var f=g[e].images.length-1;t.addEventListener("click",(function(t){t.preventDefault(),v.currentGallery=e,C(f),window.initialFocus=t.currentTarget}))})),window.addEventListener("keydown",(function(t){if(v.open){var e=focusableElements(s),n=e[0],r=e[1],o=e[e.length-1],a=e[e.length-2];"Tab"===t.key&&(1===e.length&&t.preventDefault(),t.shiftKey?(document.activeElement===n||n.disabled&&document.activeElement===r||n.disabled&&document.activeElement===s)&&(t.preventDefault(),o.disabled?a.focus():o.focus()):((document.activeElement===o||o.disabled&&document.activeElement===a||o.disabled&&document.activeElement===s)&&(t.preventDefault(),n.disabled?r.focus():n.focus()),n.disabled&&o.disabled&&(t.preventDefault(),m.focus()))),32!==t.keyCode&&"Enter"!==t.key||(document.activeElement===d&&(v.lastKeyboardControl="ArrowLeft"),document.activeElement===y&&(v.lastKeyboardControl="ArrowRight")),"Escape"===t.key&&b(),"ArrowLeft"===t.key&&(v.lastKeyboardControl="ArrowLeft",L()),"ArrowRight"===t.key&&(v.lastKeyboardControl="ArrowRight",E())}})),s.addEventListener("click",(function(t){t.target.id==="".concat(n,"-modal")&&(t.preventDefault(),b())})),d.addEventListener("click",(function(t){t.preventDefault(),L()})),y.addEventListener("click",(function(t){t.preventDefault(),E()})),m.addEventListener("click",(function(t){t.preventDefault(),b()})),u.addEventListener("touchmove",(function(t){v.touch.lastPos>v.touch.startPos?v.touch.direction=-1:v.touch.direction=1,v.touch.direction<0&&!T()&&P(t.touches[0].clientX-v.touch.startPos),v.touch.direction>0&&!A()&&P(t.touches[0].clientX-v.touch.startPos),A()&&T()&&P(t.touches[0].clientX-v.touch.startPos),v.touch.lastPos=t.touches[0].clientX}),{passive:!0}),u.addEventListener("touchstart",(function(t){v.touch.startPos=t.touches[0].clientX,v.touch.direction=0,D()}),{passive:!0}),u.addEventListener("touchend",(function(){v.touch.lastPos-v.touch.startPos>v.touch.moveThreshold&&(A()?L():P(0)),v.touch.lastPos-v.touch.startPos<-v.touch.moveThreshold&&(T()?E():P(0))}),{passive:!0}))};window.initLightbox=initLightbox;