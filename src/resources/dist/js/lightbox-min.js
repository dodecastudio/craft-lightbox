"use strict";function _toConsumableArray(e){return _arrayWithoutHoles(e)||_iterableToArray(e)||_unsupportedIterableToArray(e)||_nonIterableSpread()}function _arrayWithoutHoles(e){if(Array.isArray(e))return _arrayLikeToArray(e)}function _iterableToArray(e){if("undefined"!=typeof Symbol&&null!=e[Symbol.iterator]||null!=e["@@iterator"])return Array.from(e)}function _unsupportedIterableToArray(e,t){if(e){if("string"==typeof e)return _arrayLikeToArray(e,t);var n=Object.prototype.toString.call(e).slice(8,-1);return"Object"===n&&e.constructor&&(n=e.constructor.name),"Map"===n||"Set"===n?Array.from(e):"Arguments"===n||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(n)?_arrayLikeToArray(e,t):void 0}}function _arrayLikeToArray(e,t){(null==t||t>e.length)&&(t=e.length);for(var n=0,r=new Array(t);n<t;n++)r[n]=e[n];return r}function _nonIterableSpread(){throw new TypeError("Invalid attempt to spread non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}var focusableElements=function(e){return e.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]')},focusFirstDescendant=function e(t,n){for(var r=0;r<t.childNodes.length;r++){var a=t.childNodes[r];if(attemptFocus(a)||e(a))return!0}return!(!n||!attemptFocus(n))},attemptFocus=function(e){if(!isFocusable(e))return!1;try{e.focus()}catch(e){return!1}return document.activeElement===e},isFocusable=function(e){if(e.tabIndex<0)return!1;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!=e.rel;case"INPUT":return"hidden"!=e.type;case"BUTTON":case"SELECT":case"TEXTAREA":case"AREA":return!0;default:return!1}},addMultiple=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(t=e.classList).add.apply(t,_toConsumableArray(r))},removeMultiple=function(e){var t,n=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"",r=""!=n?n.split(" "):[];r.length>0&&(t=e.classList).remove.apply(t,_toConsumableArray(r))},initLightbox=function(e){var t=e.cssClasses,n=e.identifier,r=e.launchLightboxCssClass,a=e.translations,o=document.querySelector("body"),i=document.getElementById("".concat(n,"-modal")),s=document.getElementById("".concat(n,"-container")),c=document.getElementById("".concat(n,"-frame")),l=document.getElementById("".concat(n,"-control-previous")),u=document.getElementById("".concat(n,"-control-next")),d=document.getElementById("".concat(n,"-control-close")),m=document.getElementById("".concat(n,"-info-caption")),y=document.getElementById("".concat(n,"-info-total")),f=document.querySelectorAll(".".concat(r)),p={},g={timing:250,currentGallery:"default",current:-1,open:!1,touch:{startPos:0,lastPos:0,direction:0,moveThreshold:50},lastKeyboardControl:!1,isTouchDevice:"ontouchstart"in window,supportedResponsiveMimeTypes:["image/jpeg","image/png","image/tiff","image/webp"]},h=function(){window.initialFocus&&window.initialFocus.focus(),i.style.display="none",i.setAttribute("aria-label",a.LABEL),i.setAttribute("aria-hidden",!0),o.classList.remove(t.disableScroll),removeMultiple(o,t.disableScrollClasses),g.current=-1,g.open=!1,y.style.display="none",y.innerText="",m.style.display="none",c.innerHTML="",c.classList.remove(t.lightboxImageLoading),g.lastKeyboardControl=!1},b=function(){g.touch.direction=-1,T(g.current-(L()?1:0))},v=function(){g.touch.direction=1,T(g.current+(E()?1:0))},L=function(){return g.current>0},E=function(){return g.current<p[g.currentGallery].images.length-1},A=function(){l.style.setProperty("display","none"),u.style.setProperty("display","none")},I=function(){l.style.removeProperty("display"),u.style.removeProperty("display")},T=function(e){var n=p[g.currentGallery].images.length;e>=0&&e<=n-1&&n>0&&(g.open||function(){var e=p[g.currentGallery].images.length,n=p[g.currentGallery].title,r=1==e?a.UNTITLED_DYNAMIC_LABEL_s:a.UNTITLED_DYNAMIC_LABEL_p;"untitled"!==n&&(r=1==e?a.DYNAMIC_LABEL_s:a.DYNAMIC_LABEL_p),r=(r=r.replace("{total}",e)).replace("{title}",n),i.setAttribute("aria-label",r),i.style.display="flex",i.setAttribute("aria-hidden",!1),o.classList.add(t.disableScroll),addMultiple(o,t.disableScrollClasses),g.open=!0,s.focus(),focusFirstDescendant(s,d)}(),g.current!==e&&(g.current=e,L()||E()?(I(),L()?(l.classList.remove("visibility-hidden"),l.disabled=!1):(l.classList.add("visibility-hidden"),l.disabled=!0),E()?(u.classList.remove("visibility-hidden"),u.disabled=!1):(u.classList.add("visibility-hidden"),u.disabled=!0)):A(),"right"===g.lastKeyboardControl&&(u.disabled?i.focus():u.focus()),"left"===g.lastKeyboardControl&&(l.disabled?i.focus():l.focus()),x(),window.setTimeout((function(){w();var n=function(e){var n=p[g.currentGallery].images[e],r=n.mimetype,o=n.srcsetImages,i=n.srcsetImagesWebp,s=n.title,c=n.url,l=g.supportedResponsiveMimeTypes.includes(r),u=o.length>0;if(l&&u){var d=o[0].indexOf(" ")>0?o[0].substring(0,o[0].indexOf(" ")):o[0],m=o.length>0?'<source type="'.concat(r,'" srcset="').concat(o,'" />'):"",y=i.length>0?'<source type="image/webp" srcset="'.concat(i,'" />'):"";return'\n        <picture class="'.concat(t.lightboxPicture," ").concat(t.lightboxPictureClasses,'">\n          ').concat(m,"\n          ").concat(y,'\n          <img\n            alt=""\n            class="').concat(t.lightboxImage," ").concat(t.lightboxImageClasses,'"\n            loading="lazy"\n            src="').concat(d,'" />\n        </picture>\n      ')}if(r.indexOf("image")<0){var f=r.substring(r.lastIndexOf("/")+1);return'<p style="text-align: center;">'.concat(a.UNSUPPORTED_FILETYPE.replace("{ext}",f),'<br/><a href="').concat(c,'" target="_blank">').concat(s,"</a><br/>").concat(c.substring(c.lastIndexOf("/")+1),"</p>")}return'\n      <img\n        alt=""\n        class="'.concat(t.lightboxImage," ").concat(t.lightboxImageClasses,'"\n        loading="lazy"\n        src="').concat(c,'" />\n    ')}(e),r=p[g.currentGallery].images[e].averageColor;if(c.innerHTML=n,r){var o=r.replace(/[^\d,]/g,"").split(",");i.style.backgroundColor="hsla(".concat(o[0],",").concat(o[1],"%,").concat(.5*o[2],"%,0.95)")}var s=c.querySelector("img");s&&(c.classList.add(t.lightboxImageLoading),s.onload=function(){c.classList.remove(t.lightboxImageLoading)}),function(e){var n=p[g.currentGallery].images.length,r=p[g.currentGallery].images[g.current].title,a=g.current+1;i.dataset.showcounter&&(y.style.removeProperty("display"),y.innerHTML='<span class="'.concat(t.screenReaderOnly," ").concat(t.screenReaderOnlyClasses,'">Image ').concat(a," of ").concat(n,'.</span><span aria-hidden="true">').concat(a,"/").concat(n,"</span>")),i.dataset.showcaptions?(m.style.removeProperty("display"),m.innerHTML=r):e.setAttribute("alt",r)}(s)}),g.timing)))},w=function(){C(0),_()},C=function(e){c.style.transform="translate3d(".concat(e,", 0, 0)")},x=function(){var e=g.touch.direction>0?"-200%":g.touch.direction<0?"200%":0;c.style.transform="translate3d(".concat(e,", 0, 0)"),c.style.transitionDuration="".concat(g.timing,"ms"),c.style.transitionProperty="transform"},_=function(){c.style.transitionDuration="0ms",c.style.transform="transform: translate3d(0, 0, 0)"};f.length>0&&(f.forEach((function(e){var t=e.dataset.gallery?e.dataset.gallery:"default";if(void 0===p[t]){var n=document.getElementById(t),r=n&&n.dataset.title?n.dataset.title:"untitled";p[t]={ref:t,title:r,images:[]}}var a=e.dataset,o=a.averagecolor,i=void 0===o?null:o,s=a.mimetype,c=a.orientation,l=a.ref,u=void 0===l?null:l,d=a.srcset,m=void 0===d?"":d,y=a.srcsetwebp,f=void 0===y?"":y,h=a.title,b=a.url;p[t].images.push({url:b,title:h,orientation:c,srcsetImages:m.indexOf(",")>0?m.split(","):[],srcsetImagesWebp:f.indexOf(",")>0?f.split(","):[],mimetype:s,ref:u,gallery:t,averageColor:i});var v=p[t].images.length-1;e.addEventListener("click",(function(e){e.preventDefault(),g.open||(g.currentGallery=t,T(v),window.initialFocus=e.currentTarget)}))})),window.addEventListener("keydown",(function(e){if(g.open){var t=focusableElements(i),n=t[0],r=t[1],a=t[t.length-1],o=t[t.length-2];"Tab"===e.key&&(1===t.length&&e.preventDefault(),e.shiftKey?(document.activeElement===n||n.disabled&&document.activeElement===r||n.disabled&&document.activeElement===i)&&(e.preventDefault(),a.disabled?o.focus():a.focus()):((document.activeElement===a||a.disabled&&document.activeElement===o||a.disabled&&document.activeElement===i)&&(e.preventDefault(),n.disabled?r.focus():n.focus()),n.disabled&&a.disabled&&(e.preventDefault(),d.focus()))),32!==e.keyCode&&"Enter"!==e.key||(document.activeElement===l&&(g.lastKeyboardControl="ArrowLeft"),document.activeElement===u&&(g.lastKeyboardControl="ArrowRight")),"Escape"===e.key&&h(),"ArrowLeft"===e.key&&(g.lastKeyboardControl="ArrowLeft",b()),"ArrowRight"===e.key&&(g.lastKeyboardControl="ArrowRight",v())}})),i.addEventListener("click",(function(e){e.target.id!=="".concat(n,"-modal")&&e.target.id!=="".concat(n,"-frame")||(e.preventDefault(),h())})),l.addEventListener("click",(function(e){e.preventDefault(),b()})),u.addEventListener("click",(function(e){e.preventDefault(),v()})),d.addEventListener("click",(function(e){e.preventDefault(),h()})),c.addEventListener("touchmove",(function(e){g.touch.lastPos>g.touch.startPos?g.touch.direction=-1:g.touch.direction=1,g.touch.direction<0&&!E()&&C(e.touches[0].clientX-g.touch.startPos),g.touch.direction>0&&!L()&&C(e.touches[0].clientX-g.touch.startPos),L()&&E()&&C(e.touches[0].clientX-g.touch.startPos),g.touch.lastPos=e.touches[0].clientX}),{passive:!0}),c.addEventListener("touchstart",(function(e){g.touch.startPos=e.touches[0].clientX,g.touch.direction=0,_()}),{passive:!0}),c.addEventListener("touchend",(function(){g.touch.lastPos-g.touch.startPos>g.touch.moveThreshold&&(L()?b():C(0)),g.touch.lastPos-g.touch.startPos<-g.touch.moveThreshold&&(E()?v():C(0))}),{passive:!0}))};window.initLightbox=initLightbox;