!function(e){"function"==typeof define&&define.amd?define(e):e()}((function(){"use strict";const e=(n,r)=>{for(var s=0;s<n.childNodes.length;s++){var o=n.childNodes[s];if(t(o)||e(o))return!0}return!(!r||!t(r))},t=e=>{if(!n(e))return!1;try{e.focus()}catch(e){return!1}return document.activeElement===e},n=e=>{if(e.tabIndex<0)return!1;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!=e.rel;case"INPUT":return"hidden"!=e.type;case"BUTTON":case"SELECT":case"TEXTAREA":case"AREA":return!0;default:return!1}};window.initLightbox=({cssClasses:t,identifier:n,launchLightboxCssClass:r,translations:s})=>{const o=document.querySelector("body"),a=document.getElementById(`${n}-modal`),i=document.getElementById(`${n}-container`),l=document.getElementById(`${n}-frame`),c=document.getElementById(`${n}-control-previous`),d=document.getElementById(`${n}-control-next`),u=document.getElementById(`${n}-control-close`),p=document.getElementById(`${n}-info-caption`),m=document.getElementById(`${n}-info-total`),y=document.querySelectorAll(`.${r}`),g={},h={timing:250,currentGallery:"default",current:-1,open:!1,touch:{startPos:0,lastPos:0,direction:0,moveThreshold:50},lastKeyboardControl:!1,isTouchDevice:"ontouchstart"in window,supportedResponsiveImageMimeTypes:["image/jpeg","image/png","image/tiff","image/webp"]},v={"3gp":"video/3gpp","3gp2":"video/3gpp2",avi:"video/avi",m3u8:"application/x-mpegURL",mkv:"video/x-matroska",mov:"video/quicktime",mp4:"video/mp4",mpeg:"video/mpeg",ogg:"video/ogg",webm:"video/webm",wmv:"video/x-ms-wmv"},f=()=>{window.initialFocus&&window.initialFocus.focus(),b()},b=()=>{a.style.display="none",a.setAttribute("aria-label",s.LABEL),a.setAttribute("aria-hidden",!0),o.classList.remove(t.disableScroll),((e,t="")=>{const n=""!=t?t.split(" "):[];n.length>0&&e.classList.remove(...n)})(o,t.disableScrollClasses),h.current=-1,h.open=!1,m.style.display="none",m.innerText="",p.style.display="none",l.innerHTML="",l.classList.remove(t.lightboxImageLoading),h.lastKeyboardControl=!1},E=()=>{h.touch.direction=-1,U(h.current-(I()?1:0))},L=()=>{h.touch.direction=1,U(h.current+(w()?1:0))},I=()=>h.current>0,w=()=>h.current<g[h.currentGallery].content.length-1,C=()=>{c.style.setProperty("display","none"),c.disabled=!0,d.style.setProperty("display","none"),d.disabled=!0},P=()=>{c.style.removeProperty("display"),d.style.removeProperty("display")},T=e=>{const{mimetype:n,srcsetImages:r,srcsetImagesWebp:o,title:a,url:i}=g[h.currentGallery].content[e],l=h.supportedResponsiveImageMimeTypes.includes(n),c=r.length>0;if(l&&c){const e=r[0].indexOf(" ")>0?r[0].substring(0,r[0].indexOf(" ")):r[0],s=r.length>0?`<source type="${n}" srcset="${r}" />`:"",i=o.length>0?`<source type="image/webp" srcset="${o}" />`:"";return`\n        <picture class="${t.lightboxPicture} ${t.lightboxPictureClasses}">\n          ${s}\n          ${i}\n          <img\n            alt="${a}"\n            class="${t.lightboxImage} ${t.lightboxImageClasses}"\n            loading="lazy"\n            src="${e}" />\n        </picture>\n      `}if(n.indexOf("image")<0){const e=n.substring(n.lastIndexOf("/")+1);return`<p style="text-align: center;">${s.UNSUPPORTED_FILETYPE.replace("{ext}",e)}<br/><a href="${i}" target="_blank">${a}</a><br/>${i.substring(i.lastIndexOf("/")+1)}</p>`}return`\n      <img\n        alt="${a}"\n        class="${t.lightboxImage} ${t.lightboxImageClasses}"\n        loading="lazy"\n        src="${i}" />\n    `},x=e=>{const{mimetype:n,url:r}=g[h.currentGallery].content[e],o=(e=>{const t=e.split(/[#?]/)[0].split(".").pop().trim();return t||!1})(r),a=n||v[o];return r&&o&&a?`\n      <div class="${t.videoIframeWrapper} ${t.videoIframeWrapperClasses}">\n        <video class="${t.video} ${t.videoClasses}" controls playsinline autoplay disablepictureinpicture>\n          <source src="${r}" type="${a}" />\n        </video>\n      </div>`:`<p>${s.UNSUPPORTED_VIDEO}</p>`},A=e=>{const{title:n,url:r}=g[h.currentGallery].content[e],o=(e=>{const t=e.match(/^.*((youtu.be\/)|(v\/)|(\/u\/\w\/)|(embed\/)|(watch\?))\??v?=?([^#&?]*).*/);return!(!t||11!=t[7].length)&&t[7]})(r);return r&&o?`\n      <div class="${t.videoIframeWrapper} ${t.videoIframeWrapperClasses}">\n        <iframe class="${t.iframe} ${t.iframeClasses}" title="${n}" allow="accelerometer; autoplay; encrypted-media; gyroscope; picture-in-picture" allowfullscreen="" src="https://www.youtube-nocookie.com/embed/${o}?autoplay=1&amp;playsinline=1"></iframe>\n      </div>\n    `:`<p>${s.UNSUPPORTED_YOUTUBE}</p>`},D=e=>{const{title:n,url:r}=g[h.currentGallery].content[e],o=(e=>{const t=e.match(/^.*(vimeo\.com\/)((channels\/[A-z]+\/)|(groups\/[A-z]+\/videos\/))?([0-9]+)/);return!(!t||!t[5])&&t[5]})(r);return r&&o?`<div class="${t.videoIframeWrapper} ${t.videoIframeWrapperClasses}">\n      <iframe class="${t.iframe} ${t.iframeClasses}" title="${n}" allow="autoplay; fullscreen; picture-in-picture; encrypted-media; accelerometer; gyroscope" src="https://player.vimeo.com/video/${o}?loop=false&amp;autoplay=true&amp;muted=false&amp;gesture=media&amp;playsinline=false&amp;byline=false&amp;portrait=false&amp;title=false&amp;speed=true&amp;transparent=false&amp;customControls=true"></iframe>\n    </div>\n    `:`<p>${s.UNSUPPORTED_VIMEO}</p>`},k=e=>{const{target:t}=g[h.currentGallery].content[e],n=document.querySelector(t);return n?n.innerHTML:`<p>${s.UNSUPPORTED_QUERY}</p>`},O=(e,t)=>{const n=document.querySelector(e);return n?n.innerHTML:t},U=n=>{const r=g[h.currentGallery].content.length;n>=0&&n<=r-1&&r>0&&(h.open||(()=>{const n=g[h.currentGallery].content.length,r=g[h.currentGallery].title;let l=1==n?s.UNTITLED_DYNAMIC_LABEL_s:s.UNTITLED_DYNAMIC_LABEL_p;"untitled"!==r&&(l=1==n?s.DYNAMIC_LABEL_s:s.DYNAMIC_LABEL_p),l=l.replace("{total}",n),l=l.replace("{title}",r),a.setAttribute("aria-label",l),a.style.display="flex",a.setAttribute("aria-hidden",!1),o.classList.add(t.disableScroll),((e,t="")=>{const n=""!=t?t.split(" "):[];n.length>0&&e.classList.add(...n)})(o,t.disableScrollClasses),h.open=!0,i.focus(),e(i,u)})(),h.current!==n&&(h.current=n,I()||w()?(P(),I()?(c.classList.remove("visibility-hidden"),c.disabled=!1):(c.classList.add("visibility-hidden"),c.disabled=!0),w()?(d.classList.remove("visibility-hidden"),d.disabled=!1):(d.classList.add("visibility-hidden"),d.disabled=!0)):C(),"right"===h.lastKeyboardControl&&(d.disabled?a.focus():d.focus()),"left"===h.lastKeyboardControl&&(c.disabled?a.focus():c.focus()),R(),window.setTimeout((()=>{B();const e=(e=>{const{type:t}=g[h.currentGallery].content[e];return"image"===t?T(e):"video"===t?x(e):"youtube"===t?A(e):"vimeo"===t?D(e):"query"===t?k(e):void 0})(n),{averageColor:r,type:s}=g[h.currentGallery].content[n];if(l.innerHTML=e,r){const e=r.replace(/[^\d,]/g,"").split(",");a.style.backgroundColor=`hsla(${e[0]},${e[1]}%,${.5*e[2]}%,0.95)`}const o=l.querySelector("img");o&&(l.classList.add(t.lightboxImageLoading),o.onload=()=>{l.classList.remove(t.lightboxImageLoading)}),((e=null)=>{const n=g[h.currentGallery].content.length,{captionContent:r,title:s,type:o}=g[h.currentGallery].content[h.current],i=h.current+1;a.dataset.showcounter&&n>1&&(m.style.removeProperty("display"),m.innerHTML=`<span class="${t.screenReaderOnly} ${t.screenReaderOnlyClasses}">Image ${i} of ${n}.</span><span aria-hidden="true">${i}/${n}</span>`),a.dataset.showcaptions?(p.style.removeProperty("display"),p.innerHTML=O(r,s)):e&&"image"==o&&e.setAttribute("alt",s)})(o)}),h.timing)))},B=()=>{N(0),S()},N=e=>{l.style.transform=`translate3d(${e}, 0, 0)`},R=()=>{const e=h.touch.direction>0?"-200%":h.touch.direction<0?"200%":0;l.style.transform=`translate3d(${e}, 0, 0)`,l.style.transitionDuration=`${h.timing}ms`,l.style.transitionProperty="transform"},S=()=>{l.style.transitionDuration="0ms",l.style.transform="transform: translate3d(0, 0, 0)"};y.length>0&&(y.forEach((e=>{const t=e.dataset.gallery?e.dataset.gallery:"default";if(void 0===g[t]){const e=document.getElementById(t),n=e&&e.dataset.title?e.dataset.title:"untitled";g[t]={content:[],ref:t,title:n}}const{averagecolor:n=null,captioncontent:r=!1,mimetype:s,orientation:o,ref:a=null,srcset:i="",srcsetwebp:l="",target:c,title:d,type:u,url:p}=e.dataset;g[t].content.push({averageColor:n,captionContent:r,gallery:t,mimetype:s,orientation:o,ref:a,srcsetImages:i.indexOf(",")>0?i.split(","):[],srcsetImagesWebp:l.indexOf(",")>0?l.split(","):[],target:c,title:d,type:u,url:p});const m=g[t].content.length-1;e.addEventListener("click",(e=>{e.preventDefault(),h.open||(h.currentGallery=t,U(m),window.initialFocus=e.currentTarget)}))})),window.addEventListener("keydown",(e=>{if(h.open){const t=a.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=t[0],r=t[1],s=t[t.length-1],o=t[t.length-2],i=()=>{(document.activeElement===n||n.disabled&&document.activeElement===r||n.disabled&&document.activeElement===a)&&(e.preventDefault(),s.disabled?o.focus():s.focus())},l=()=>{(document.activeElement===s||s.disabled&&document.activeElement===o||s.disabled&&document.activeElement===a)&&(e.preventDefault(),n.disabled?r.focus():n.focus()),n.disabled&&s.disabled&&(e.preventDefault(),u.focus())};"Tab"===e.key&&(1===t.length&&e.preventDefault(),e.shiftKey?i():l()),32!==e.keyCode&&"Enter"!==e.key||(document.activeElement===c&&(h.lastKeyboardControl="ArrowLeft"),document.activeElement===d&&(h.lastKeyboardControl="ArrowRight")),"Escape"===e.key&&f(),"ArrowLeft"===e.key&&(h.lastKeyboardControl="ArrowLeft",E()),"ArrowRight"===e.key&&(h.lastKeyboardControl="ArrowRight",L())}})),a.addEventListener("click",(e=>{e.target.id!==`${n}-modal`&&e.target.id!==`${n}-frame`||(e.preventDefault(),f())})),c.addEventListener("click",(e=>{e.preventDefault(),E()})),d.addEventListener("click",(e=>{e.preventDefault(),L()})),u.addEventListener("click",(e=>{e.preventDefault(),f()})),l.addEventListener("touchmove",(e=>{h.touch.lastPos>h.touch.startPos?h.touch.direction=-1:h.touch.direction=1,h.touch.direction<0&&!w()&&N(e.touches[0].clientX-h.touch.startPos),h.touch.direction>0&&!I()&&N(e.touches[0].clientX-h.touch.startPos),I()&&w()&&N(e.touches[0].clientX-h.touch.startPos),h.touch.lastPos=e.touches[0].clientX}),{passive:!0}),l.addEventListener("touchstart",(e=>{h.touch.startPos=e.touches[0].clientX,h.touch.direction=0,S()}),{passive:!0}),l.addEventListener("touchend",(()=>{h.touch.lastPos-h.touch.startPos>h.touch.moveThreshold&&(I()?E():N(0)),h.touch.lastPos-h.touch.startPos<-h.touch.moveThreshold&&(w()?L():N(0))}),{passive:!0}))}}));