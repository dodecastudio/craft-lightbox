!function(){"use strict";var t=function t(n,o){for(var a=0;a<n.childNodes.length;a++){var r=n.childNodes[a];if(e(r)||t(r))return!0}return!(!o||!e(o))},e=function(t){if(!n(t))return!1;try{t.focus()}catch(t){return!1}return document.activeElement===t},n=function(t){if(t.tabIndex<0)return!1;if(t.disabled)return!1;switch(t.nodeName){case"A":return!!t.href&&"ignore"!=t.rel;case"INPUT":return"hidden"!=t.type;case"BUTTON":case"SELECT":case"TEXTAREA":case"AREA":return!0;default:return!1}};window.initLightbox=function(e){var n=e.cssClasses,o=e.identifier,a=e.launchLightboxCssClass,r=e.responsive,i=e.srcsetSizes,c=e.translations,s=document.querySelector("body"),l=document.getElementById("".concat(o,"-modal")),d=document.getElementById("".concat(o,"-container")),u=document.getElementById("".concat(o,"-frame")),m=document.getElementById("".concat(o,"-control-previous")),f=document.getElementById("".concat(o,"-control-next")),y=document.getElementById("".concat(o,"-control-close")),h=document.getElementById("".concat(o,"-info-caption")),g=document.getElementById("".concat(o,"-info-total")),p=document.querySelectorAll(".".concat(a)),v={},b={timing:500,currentGallery:"default",current:-1,open:!1,touch:{startPos:0,lastPos:0,direction:0,moveThreshold:50},lastKeyboardControl:!1,isTouchDevice:"ontouchstart"in window,supportedResponsiveMimeTypes:["image/jpeg","image/png","image/tiff","image/webp"]},E=function(){var e=v[b.currentGallery].images.length,n=v[b.currentGallery].title,o=1==e?c.UNTITLED_DYNAMIC_LABEL_s:c.UNTITLED_DYNAMIC_LABEL_p;"untitled"!==n&&(o=1==e?c.DYNAMIC_LABEL_s:c.DYNAMIC_LABEL_p),o=(o=o.replace("{total}",e)).replace("{title}",n),l.setAttribute("aria-label",o),l.style.display="flex",l.setAttribute("aria-hidden",!1),s.classList.add("disablescroll"),b.open=!0,d.focus(),t(d,y)},L=function(){window.initialFocus&&window.initialFocus.focus(),l.style.display="none",l.setAttribute("aria-label",c.LABEL),l.setAttribute("aria-hidden",!0),s.classList.remove("disablescroll"),b.current=-1,b.open=!1,g.style.display="none",g.innerText="",h.style.display="none",u.innerHTML="",u.classList.remove("".concat(n.lightboxContent,"--loading")),b.lastKeyboardControl=!1},A=function(){b.touch.direction=-1,C(b.current-(w()?1:0))},I=function(){b.touch.direction=1,C(b.current+(T()?1:0))},w=function(){return b.current>0},T=function(){return b.current<v[b.currentGallery].images.length-1},P=function(){m.style.setProperty("display","none"),f.style.setProperty("display","none")},x=function(){m.style.removeProperty("display"),f.style.removeProperty("display")},C=function(t){var e=v[b.currentGallery].images.length;t>=0&&t<=e-1&&e>0&&(b.open||E(),b.current!==t&&(b.current=t,w()||T()?(x(),w()?(m.classList.remove("visibility-hidden"),m.disabled=!1):(m.classList.add("visibility-hidden"),m.disabled=!0),T()?(f.classList.remove("visibility-hidden"),f.disabled=!1):(f.classList.add("visibility-hidden"),f.disabled=!0)):P(),"right"===b.lastKeyboardControl&&(f.disabled?l.focus():f.focus()),"left"===b.lastKeyboardControl&&(m.disabled?l.focus():m.focus()),k(),window.setTimeout((function(){D();var e=function(t){var e=v[b.currentGallery].images[t],o=e.mimetype,a=e.srcsetImages,s=e.title,l=e.url;if(b.supportedResponsiveMimeTypes.includes(o)&&r)return'\n        <picture class="'.concat(n.lightboxPicture,'">\n          <source\n            type="').concat(o,'"\n            srcset="').concat(i.map((function(t,e){return"".concat(a[e]," ").concat(t,"w,")})),"\n            ").concat(l,'" />\n          <img\n            alt=""\n            class="').concat(n.lightboxImage,'"\n            loading="lazy"\n            src="').concat(a[0],'" />\n        </picture>\n      ');if(o.indexOf("image")<0){var d=o.substring(o.lastIndexOf("/")+1);return'<p style="text-align: center;">'.concat(c.UNSUPPORTED_FILETYPE.replace("{ext}",d),'<br/><a href="').concat(l,'" target="_blank">').concat(s,"</a><br/>").concat(l.substring(l.lastIndexOf("/")+1),"</p>")}return'\n      <img\n        alt=""\n        class="'.concat(n.lightboxImage,'"\n        loading="lazy"\n        src="').concat(l,'" />\n    ')}(t),o=v[b.currentGallery].images[t].averageColor;if(u.innerHTML=e,o){var a=o.replace(/[^\d,]/g,"").split(",");l.style.backgroundColor="hsla(".concat(a[0],",").concat(a[1],"%,").concat(.5*a[2],"%,0.95)")}var s=u.querySelector("img");s&&(u.classList.add(n.lightboxImageLoading),s.onload=function(){u.classList.remove(n.lightboxImageLoading)}),function(t){var e=v[b.currentGallery].images.length,o=v[b.currentGallery].images[b.current].title,a=b.current+1;l.dataset.showcounter&&(g.style.removeProperty("display"),g.innerHTML='<span class="'.concat(n.screenReaderOnly," ").concat(n.screenReaderOnlyClasses,'">Image ').concat(a," of ").concat(e,'.</span><span aria-hidden="true">').concat(a,"/").concat(e,"</span>")),l.dataset.showcaptions?(h.style.removeProperty("display"),h.innerHTML=o):t.setAttribute("alt",o)}(s)}),b.timing)))},D=function(){B(0),N()},B=function(t){u.setAttribute("style","transform: translate3d(".concat(t,"px, 0, 0)"))},k=function(){var t=b.touch.direction>0?"-200%":b.touch.direction<0?"200%":0;u.setAttribute("style","transition-property: transform; transition-duration: ".concat(b.timing,"ms; transform: translate3d(").concat(t,", 0, 0)"))},N=function(){u.style.removeProperty("transition")};p.length>0&&(p.forEach((function(t){var e=t.dataset.gallery?t.dataset.gallery:"default";if(void 0===v[e]){var n=document.getElementById(e),o=n&&n.dataset.title?n.dataset.title:"untitled";v[e]={ref:e,title:o,images:[]}}var a=t.dataset,r=a.averagecolor,i=void 0===r?null:r,c=a.mimetype,s=a.orientation,l=a.ref,d=void 0===l?null:l,u=a.srcset,m=a.title,f=a.url;v[e].images.push({url:f,title:m,orientation:s,srcsetImages:u.split(","),mimetype:c,ref:d,gallery:e,averagecolor:i});var y=v[e].images.length-1;t.addEventListener("click",(function(t){t.preventDefault(),b.currentGallery=e,C(y),window.initialFocus=t.currentTarget}))})),window.addEventListener("keydown",(function(t){if(b.open){var e=l.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=e[0],o=e[1],a=e[e.length-1],r=e[e.length-2];"Tab"===t.key&&(1===e.length&&t.preventDefault(),t.shiftKey?(document.activeElement===n||n.disabled&&document.activeElement===o||n.disabled&&document.activeElement===l)&&(t.preventDefault(),a.disabled?r.focus():a.focus()):((document.activeElement===a||a.disabled&&document.activeElement===r||a.disabled&&document.activeElement===l)&&(t.preventDefault(),n.disabled?o.focus():n.focus()),n.disabled&&a.disabled&&(t.preventDefault(),y.focus()))),32!==t.keyCode&&"Enter"!==t.key||(document.activeElement===m&&(b.lastKeyboardControl="ArrowLeft"),document.activeElement===f&&(b.lastKeyboardControl="ArrowRight")),"Escape"===t.key&&L(),"ArrowLeft"===t.key&&(b.lastKeyboardControl="ArrowLeft",A()),"ArrowRight"===t.key&&(b.lastKeyboardControl="ArrowRight",I())}})),l.addEventListener("click",(function(t){"df-lightbox"===t.target.id&&(t.preventDefault(),L())})),m.addEventListener("click",(function(t){t.preventDefault(),A()})),f.addEventListener("click",(function(t){t.preventDefault(),I()})),y.addEventListener("click",(function(t){t.preventDefault(),L()})),u.addEventListener("touchmove",(function(t){b.touch.lastPos>b.touch.startPos?b.touch.direction=-1:b.touch.direction=1,b.touch.direction<0&&!T()&&B(t.touches[0].clientX-b.touch.startPos),b.touch.direction>0&&!w()&&B(t.touches[0].clientX-b.touch.startPos),w()&&T()&&B(t.touches[0].clientX-b.touch.startPos),b.touch.lastPos=t.touches[0].clientX}),{passive:!0}),u.addEventListener("touchstart",(function(t){b.touch.startPos=t.touches[0].clientX,b.touch.direction=0,N()}),{passive:!0}),u.addEventListener("touchend",(function(){b.touch.lastPos-b.touch.startPos>b.touch.moveThreshold&&(w()?A():B(0)),b.touch.lastPos-b.touch.startPos<-b.touch.moveThreshold&&(T()?I():B(0))}),{passive:!0}))}}();
//# sourceMappingURL=lightbox.js.map