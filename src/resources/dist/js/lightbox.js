!function(){"use strict";var e=function e(n,o){for(var a=0;a<n.childNodes.length;a++){var r=n.childNodes[a];if(t(r)||e(r))return!0}return!(!o||!t(o))},t=function(e){if(!n(e))return!1;try{e.focus()}catch(e){return!1}return document.activeElement===e},n=function(e){if(e.tabIndex<0)return!1;if(e.disabled)return!1;switch(e.nodeName){case"A":return!!e.href&&"ignore"!=e.rel;case"INPUT":return"hidden"!=e.type;case"BUTTON":case"SELECT":case"TEXTAREA":case"AREA":return!0;default:return!1}};window.initLightbox=function(t){var n=t.cssClasses,o=t.identifier,a=t.launchLightboxCssClass,r=t.responsive,i=t.srcsetSizes,c=t.translations,s=document.querySelector("body"),l=document.getElementById("".concat(o,"-modal")),d=document.getElementById("".concat(o,"-container")),u=document.getElementById("".concat(o,"-frame")),m=document.getElementById("".concat(o,"-control-previous")),y=document.getElementById("".concat(o,"-control-next")),f=document.getElementById("".concat(o,"-control-close")),h=document.getElementById("".concat(o,"-info-caption")),g=document.getElementById("".concat(o,"-info-total")),p=document.querySelectorAll(".".concat(a)),v={},b={timing:500,currentGallery:"default",current:-1,open:!1,touch:{startPos:0,lastPos:0,direction:0,moveThreshold:50},lastKeyboardControl:!1,isTouchDevice:"ontouchstart"in window,supportedResponsiveMimeTypes:["image/jpeg","image/png","image/tiff","image/webp"]},L=function(){var t=v[b.currentGallery].images.length,n=v[b.currentGallery].title,o=1==t?c.LIGHTBOX_UNTITLED_DYNAMIC_LABEL_s:c.LIGHTBOX_UNTITLED_DYNAMIC_LABEL_p;"untitled"!==n&&(o=1==t?c.LIGHTBOX_DYNAMIC_LABEL_s:c.LIGHTBOX_DYNAMIC_LABEL_p),o=(o=o.replace("{total}",t)).replace("{title}",n),l.setAttribute("aria-label",o),l.style.display="flex",l.setAttribute("aria-hidden",!1),s.classList.add("disablescroll"),b.open=!0,d.focus(),e(d,f)},E=function(){window.initialFocus&&window.initialFocus.focus(),l.style.display="none",l.setAttribute("aria-label",c.LIGHTBOX_LABEL),l.setAttribute("aria-hidden",!0),s.classList.remove("disablescroll"),b.current=-1,b.open=!1,g.style.display="none",g.innerText="",h.style.display="none",u.innerHTML="",u.classList.remove("".concat(n.lightboxContent,"--loading")),b.lastKeyboardControl=!1},A=function(){b.touch.direction=-1,B(b.current-(T()?1:0))},I=function(){b.touch.direction=1,B(b.current+(w()?1:0))},T=function(){return b.current>0},w=function(){return b.current<v[b.currentGallery].images.length-1},C=function(){m.style.setProperty("display","none"),y.style.setProperty("display","none")},P=function(){m.style.removeProperty("display"),y.style.removeProperty("display")},B=function(e){var t=v[b.currentGallery].images.length;e>=0&&e<=t-1&&t>0&&(b.open||L(),b.current!==e&&(b.current=e,T()||w()?(P(),T()?(m.classList.remove("visibility-hidden"),m.disabled=!1):(m.classList.add("visibility-hidden"),m.disabled=!0),w()?(y.classList.remove("visibility-hidden"),y.disabled=!1):(y.classList.add("visibility-hidden"),y.disabled=!0)):C(),"right"===b.lastKeyboardControl&&(y.disabled?l.focus():y.focus()),"left"===b.lastKeyboardControl&&(m.disabled?l.focus():m.focus()),k(),window.setTimeout((function(){x();var t=function(e){var t=v[b.currentGallery].images[e],o=t.image,a=t.mimetype,c=t.srcsetImages,s=t.title;return b.supportedResponsiveMimeTypes.includes(a)&&r?'\n        <picture class="'.concat(n.lightboxPicture,'">\n          <source\n            type="').concat(a,'"\n            srcset="').concat(i.map((function(e,t){return"".concat(c[t]," ").concat(e,"w,")})),"\n            ").concat(c[0],'" />\n          <img\n            alt=""\n            class="').concat(n.lightboxImage,'"\n            loading="lazy"\n            src="').concat(c[0],'" />\n        </picture>\n      '):'\n      <img\n        alt="'.concat(s,'"\n        class="').concat(n.lightboxImage,'"\n        loading="lazy"\n        src="').concat(o,'" />\n    ')}(e),o=v[b.currentGallery].images[e].averageColor;if(u.innerHTML=t,o){var a=o.replace(/[^\d,]/g,"").split(",");l.style.backgroundColor="hsla(".concat(a[0],",").concat(a[1],"%,").concat(.5*a[2],"%,0.95)")}var c=u.querySelector("img");c&&(u.classList.add(n.lightboxImageLoading),c.onload=function(){u.classList.remove(n.lightboxImageLoading)}),function(e){var t=v[b.currentGallery].images.length,o=v[b.currentGallery].images[b.current].title,a=b.current+1;l.dataset.showcounter&&(g.style.removeProperty("display"),g.innerHTML='<span class="'.concat(n.screenReaderOnly," ").concat(n.screenReaderOnlyClasses,'">Image ').concat(a," of ").concat(t,'.</span><span aria-hidden="true">').concat(a,"/").concat(t,"</span>")),l.dataset.showcaptions?(h.style.removeProperty("display"),h.innerHTML=o):e.setAttribute("alt",o)}(c)}),b.timing)))},x=function(){D(0),G()},D=function(e){u.setAttribute("style","transform: translate3d(".concat(e,"px, 0, 0)"))},k=function(){var e=b.touch.direction>0?"-200%":b.touch.direction<0?"200%":0;u.setAttribute("style","transition-property: transform; transition-duration: ".concat(b.timing,"ms; transform: translate3d(").concat(e,", 0, 0)"))},G=function(){u.style.removeProperty("transition")};p.length>0&&(p.forEach((function(e){var t=e.dataset.gallery?e.dataset.gallery:"default";if(void 0===v[t]){var n=document.getElementById(t),o=n&&n.dataset.title?n.dataset.title:"untitled";v[t]={ref:t,title:o,images:[]}}var a=e.dataset,r=a.title,i=a.orientation,c=a.srcset,s=a.mimetype,l=a.ref,d=a.permalink,u=a.averagecolor;v[t].images.push({image:e.href,title:r,orientation:i,srcsetImages:c.split(","),mimetype:s,ref:l||null,gallery:t,permalink:d||null,averageColor:u||null});var m=v[t].images.length-1;e.addEventListener("click",(function(e){e.preventDefault(),b.currentGallery=t,B(m),window.initialFocus=e.currentTarget}))})),window.addEventListener("keydown",(function(e){if(b.open){var t=l.querySelectorAll('a[href], area[href], input:not([disabled]), select:not([disabled]), textarea:not([disabled]), button:not([disabled]), [tabindex="0"]'),n=t[0],o=t[1],a=t[t.length-1],r=t[t.length-2];"Tab"===e.key&&(1===t.length&&e.preventDefault(),e.shiftKey?(document.activeElement===n||n.disabled&&document.activeElement===o||n.disabled&&document.activeElement===l)&&(e.preventDefault(),a.disabled?r.focus():a.focus()):((document.activeElement===a||a.disabled&&document.activeElement===r||a.disabled&&document.activeElement===l)&&(e.preventDefault(),n.disabled?o.focus():n.focus()),n.disabled&&a.disabled&&(e.preventDefault(),f.focus()))),32!==e.keyCode&&"Enter"!==e.key||(document.activeElement===m&&(b.lastKeyboardControl="ArrowLeft"),document.activeElement===y&&(b.lastKeyboardControl="ArrowRight")),"Escape"===e.key&&E(),"ArrowLeft"===e.key&&(b.lastKeyboardControl="ArrowLeft",A()),"ArrowRight"===e.key&&(b.lastKeyboardControl="ArrowRight",I())}})),l.addEventListener("click",(function(e){"df-lightbox"===e.target.id&&(e.preventDefault(),E())})),m.addEventListener("click",(function(e){e.preventDefault(),A()})),y.addEventListener("click",(function(e){e.preventDefault(),I()})),f.addEventListener("click",(function(e){e.preventDefault(),E()})),u.addEventListener("touchmove",(function(e){b.touch.lastPos>b.touch.startPos?b.touch.direction=-1:b.touch.direction=1,b.touch.direction<0&&!w()&&D(e.touches[0].clientX-b.touch.startPos),b.touch.direction>0&&!T()&&D(e.touches[0].clientX-b.touch.startPos),T()&&w()&&D(e.touches[0].clientX-b.touch.startPos),b.touch.lastPos=e.touches[0].clientX}),{passive:!0}),u.addEventListener("touchstart",(function(e){b.touch.startPos=e.touches[0].clientX,b.touch.direction=0,G()}),{passive:!0}),u.addEventListener("touchend",(function(){b.touch.lastPos-b.touch.startPos>b.touch.moveThreshold&&(T()?A():D(0)),b.touch.lastPos-b.touch.startPos<-b.touch.moveThreshold&&(w()?I():D(0))}),{passive:!0}))}}();
//# sourceMappingURL=lightbox.js.map